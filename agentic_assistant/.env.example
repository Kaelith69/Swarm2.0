# ---------------------------------------------------------------------------
# Agentic Assistant — environment configuration
# Copy this file to .env and fill in your values.
# On Raspberry Pi (Linux) use Linux paths.  chmod 600 .env after editing.
# ---------------------------------------------------------------------------

# Core runtime
MODEL_PATH=/home/pi/models/gemma-2-2b-it-Q4_K_M.gguf
LLAMA_MAIN_PATH=/home/pi/llama.cpp/build/bin/llama-cli
HOST=0.0.0.0
PORT=8000

# Pi 5 tuning — start conservative, increase INFERENCE_THREADS if temps allow
INFERENCE_THREADS=4
LLM_CONTEXT_TOKENS=2048
MAX_RESPONSE_TOKENS=256
LLM_TEMPERATURE=0.2
# Subprocess timeout for llama.cpp (seconds).  120s is safe for Pi 5.
LLAMA_TIMEOUT_SECONDS=120

# RAG settings
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
RAG_TOP_K=3
RAG_DATA_DIR=./data/rag

# Safety / limits
LONG_CONTEXT_THRESHOLD_CHARS=1200
CLOUD_TIMEOUT_SECONDS=25
MAX_INPUT_CHARS=8000
EXPOSE_DELIVERY_ERRORS=false

# Conversation memory — number of past turns kept per user
MEMORY_MAX_TURNS=10

# Routing behaviour
# USE_LLM_ROUTING=true  → local Gemma decides routing for ambiguous queries
# Set to false to use keyword-only routing (faster but less accurate)
USE_LLM_ROUTING=true
# Messages shorter than this go straight to local without LLM routing overhead
LOCAL_SHORT_THRESHOLD_CHARS=150

# ---------------------------------------------------------------------------
# Hybrid cloud inference (v2)
# Leave blank to disable a cloud route; the agent falls back to local.
# ---------------------------------------------------------------------------

# Groq — fast reasoning.  Keys: https://console.groq.com/keys
GROQ_API_KEY=
GROQ_MODEL=llama-3.1-8b-instant

# Gemini — long context.  Keys: Google AI Studio / Gemini API console
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-flash

# Kimi / Moonshot — planning.  Keys: Moonshot developer console
KIMI_API_KEY=
KIMI_BASE_URL=https://api.moonshot.ai/v1
KIMI_MODEL=moonshot-v1-8k

# ---------------------------------------------------------------------------
# Optional webhook tokens
# ---------------------------------------------------------------------------

# Telegram: BotFather → /newbot → copy token
TELEGRAM_BOT_TOKEN=
# Optional secret sent with each update (set in setWebhook secret_token)
TELEGRAM_SECRET=

# Discord: discord.com/developers → Bot → copy token
DISCORD_BOT_TOKEN=
# Optional bearer token required in incoming Authorization header
DISCORD_BEARER_TOKEN=
