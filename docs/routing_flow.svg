<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 480" width="900" height="480">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
    <marker id="arrY" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#fbbf24"/>
    </marker>
    <marker id="arrR" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f87171"/>
    </marker>
    <marker id="arrG" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4ade80"/>
    </marker>
  </defs>

  <rect width="900" height="480" fill="url(#bg)" rx="14"/>
  <text x="450" y="34" font-family="'Segoe UI', Arial, sans-serif" font-size="19" font-weight="700"
        text-anchor="middle" fill="#e2e8f0">Routing Decision Flowchart</text>

  <!-- START -->
  <ellipse cx="450" cy="65" rx="90" ry="22" fill="#7c3aed" stroke="#a78bfa" stroke-width="2"/>
  <text x="450" y="70" font-family="monospace" font-size="13" font-weight="700" text-anchor="middle" fill="white">ðŸ“¨ Message</text>

  <!-- Arrow -->
  <line x1="450" y1="87" x2="450" y2="108" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>

  <!-- VALIDATE diamond -->
  <polygon points="450,110 530,138 450,166 370,138" fill="#1e293b" stroke="#94a3b8" stroke-width="1.5"/>
  <text x="450" y="134" font-family="monospace" font-size="10" text-anchor="middle" fill="#e2e8f0">Validate</text>
  <text x="450" y="148" font-family="monospace" font-size="10" text-anchor="middle" fill="#e2e8f0">input?</text>
  <!-- invalid branch right -->
  <line x1="530" y1="138" x2="620" y2="138" stroke="#f87171" stroke-width="1.5" marker-end="url(#arrR)"/>
  <rect x="620" y="122" width="150" height="32" rx="6" fill="#450a0a" stroke="#f87171" stroke-width="1.5"/>
  <text x="695" y="141" font-family="monospace" font-size="10" text-anchor="middle" fill="#fca5a5">400 / 413 Error</text>

  <!-- valid branch down -->
  <line x1="450" y1="166" x2="450" y2="186" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>
  <text x="462" y="180" font-family="monospace" font-size="9" fill="#4ade80">valid</text>

  <!-- PLAN diamond -->
  <polygon points="450,188 545,216 450,244 355,216" fill="#2e1065" stroke="#8b5cf6" stroke-width="1.5"/>
  <text x="450" y="212" font-family="monospace" font-size="10" text-anchor="middle" fill="#c4b5fd">Planning</text>
  <text x="450" y="226" font-family="monospace" font-size="10" text-anchor="middle" fill="#c4b5fd">keywords?</text>
  <!-- yes branch left -->
  <line x1="355" y1="216" x2="200" y2="216" stroke="#8b5cf6" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="282" y="210" font-family="monospace" font-size="9" fill="#8b5cf6">yes</text>
  <rect x="80" y="200" width="120" height="32" rx="6" fill="#2e1065" stroke="#8b5cf6" stroke-width="2"/>
  <text x="140" y="220" font-family="monospace" font-size="11" font-weight="700" text-anchor="middle" fill="#c4b5fd">ðŸŒ™ Kimi</text>

  <!-- no branch down -->
  <line x1="450" y1="244" x2="450" y2="264" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>
  <text x="462" y="258" font-family="monospace" font-size="9" fill="#94a3b8">no</text>

  <!-- LONG CTX diamond -->
  <polygon points="450,266 545,294 450,322 355,294" fill="#0c4a6e" stroke="#06b6d4" stroke-width="1.5"/>
  <text x="450" y="290" font-family="monospace" font-size="10" text-anchor="middle" fill="#67e8f9">Long</text>
  <text x="450" y="304" font-family="monospace" font-size="10" text-anchor="middle" fill="#67e8f9">context?</text>
  <!-- yes branch left -->
  <line x1="355" y1="294" x2="200" y2="294" stroke="#06b6d4" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="282" y="288" font-family="monospace" font-size="9" fill="#06b6d4">yes</text>
  <rect x="70" y="278" width="130" height="32" rx="6" fill="#0c4a6e" stroke="#06b6d4" stroke-width="2"/>
  <text x="135" y="298" font-family="monospace" font-size="11" font-weight="700" text-anchor="middle" fill="#67e8f9">âœ¨ Gemini</text>

  <!-- no branch down -->
  <line x1="450" y1="322" x2="450" y2="342" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>
  <text x="462" y="336" font-family="monospace" font-size="9" fill="#94a3b8">no</text>

  <!-- COMPLEX diamond -->
  <polygon points="450,344 545,372 450,400 355,372" fill="#052e16" stroke="#22c55e" stroke-width="1.5"/>
  <text x="450" y="368" font-family="monospace" font-size="10" text-anchor="middle" fill="#86efac">Complex</text>
  <text x="450" y="382" font-family="monospace" font-size="10" text-anchor="middle" fill="#86efac">reasoning?</text>
  <!-- yes branch left -->
  <line x1="355" y1="372" x2="200" y2="372" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="282" y="366" font-family="monospace" font-size="9" fill="#22c55e">yes</text>
  <rect x="75" y="356" width="120" height="32" rx="6" fill="#052e16" stroke="#22c55e" stroke-width="2"/>
  <text x="135" y="376" font-family="monospace" font-size="11" font-weight="700" text-anchor="middle" fill="#6ee7b7">âš¡ Groq</text>

  <!-- no branch down to final row -->
  <line x1="450" y1="400" x2="450" y2="420" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>
  <text x="462" y="414" font-family="monospace" font-size="9" fill="#94a3b8">no</text>

  <!-- RAG / Simple terminals -->
  <rect x="340" y="424" width="115" height="38" rx="8" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
  <text x="397" y="447" font-family="monospace" font-size="10" font-weight="700" text-anchor="middle" fill="#fde68a">ðŸ“š local_rag</text>
  <line x1="420" y1="420" x2="397" y2="422" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrY)"/>

  <rect x="475" y="424" width="135" height="38" rx="8" fill="#1e293b" stroke="#64748b" stroke-width="2"/>
  <text x="542" y="447" font-family="monospace" font-size="10" font-weight="700" text-anchor="middle" fill="#cbd5e1">ðŸ–¥ local_simple</text>
  <line x1="480" y1="420" x2="510" y2="422" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- fallback lines from cloud results -->
  <!-- kimi fallback -->
  <line x1="140" y1="232" x2="140" y2="460" stroke="#f87171" stroke-width="1" stroke-dasharray="4,3"/>
  <line x1="140" y1="460" x2="720" y2="460" stroke="#f87171" stroke-width="1" stroke-dasharray="4,3"/>
  <rect x="700" y="440" width="140" height="38" rx="8" fill="#450a0a" stroke="#ef4444" stroke-width="1.5"/>
  <text x="770" y="462" font-family="monospace" font-size="10" font-weight="700" text-anchor="middle" fill="#fca5a5">ðŸ”„ local_fallback</text>
  <text x="490" y="475" font-family="monospace" font-size="9" fill="#ef4444">â†© cloud failure â†’ local_fallback</text>
</svg>
